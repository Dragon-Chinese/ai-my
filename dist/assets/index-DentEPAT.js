
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as K,r as p,u as P,N as R,z as S,o as q,c as b,b as e,e as a,F as J,L as Q,w as c,i as X,f as x,g as k,B as Y,t as F,h as v,p as D,M as d}from"./index-CT_znvxk.js";const I="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M14.4748%204.27149L12.5468%202.34282C12.2723%202.06816%2012.2724%201.62298%2012.547%201.34842C12.8216%201.07389%2013.2668%201.07398%2013.5414%201.3486L16.6691%204.47751C17.112%204.92053%2016.7982%205.67774%2016.1719%205.67774H13.1384C12.4772%205.67774%2011.8597%206.00835%2011.4928%206.55879L11.0864%207.16863C10.8711%207.49177%2010.4346%207.57915%2010.1114%207.3638C9.78827%207.14847%209.70089%206.71192%209.91624%206.38878L10.3226%205.77896C10.9503%204.83719%2012.0069%204.27149%2013.1384%204.27149H14.4748ZM6.94005%2010.8547C7.1554%2010.5315%207.59194%2010.4442%207.91508%2010.6595C8.23822%2010.8748%208.3256%2011.3114%208.11025%2011.6345L6.82907%2013.557C6.20146%2014.4988%205.14482%2015.0645%204.01328%2015.0645H1.82812C1.43981%2015.0645%201.125%2014.7497%201.125%2014.3613C1.125%2013.973%201.43981%2013.6582%201.82812%2013.6582H4.01328C4.67452%2013.6582%205.29204%2013.3276%205.65887%2012.7772L6.94005%2010.8547ZM13.0586%2013.7285C11.977%2013.7285%2010.967%2013.1879%2010.3671%2012.2878L5.61438%205.15611C5.44745%204.90563%205.22126%204.70024%204.95588%204.55819C4.6905%204.41613%204.39415%204.3418%204.09314%204.3418H1.82812C1.43981%204.3418%201.125%204.027%201.125%203.63868C1.125%203.25036%201.43981%202.93555%201.82812%202.93555H4.09314C5.17474%202.93555%206.18476%203.4762%206.78459%204.37626L11.5373%2011.5079C11.7043%2011.7584%2011.9305%2011.9638%2012.1958%2012.1059C12.4612%2012.2479%2012.7576%2012.3223%2013.0586%2012.3223H16.1719C16.7982%2012.3223%2017.112%2013.0795%2016.6692%2013.5225L13.5414%2016.6514C13.2668%2016.926%2012.8216%2016.9261%2012.547%2016.6516C12.2724%2016.377%2012.2723%2015.9319%2012.5468%2015.6572L14.4748%2013.7285H13.0586Z'%20fill='%23333333'/%3e%3c/svg%3e",A=""+new URL("xunhuan-Bmu1ycIV.svg",import.meta.url).href,tt={style:{padding:"16px"}},et={class:"PageMain"},st={class:"grid-content"},ot={class:"grid-content-set"},it={class:"grid-content-set-item"},lt={class:"switch-block"},at={class:"switch-block-item"},nt={class:"grid-content-set-item"},rt={class:"switch-block"},ct={class:"switch-block-item"},dt={class:"grid-content-broadcast"},ut={class:"grid-content-broadcast-top"},vt={class:"grid-content-broadcast-tab"},pt=["onClick"],mt=["src"],ft=["src"],gt={class:"grid-content-broadcast-btns"},_t={class:"grid-content-broadcast-bottom"},ht={class:"script-setting"},Ct={class:"script-setting-content"},bt={class:"script-setting-content-text"},xt={class:"grid-content-broadcast-btns"},kt={class:"script-setting-content"},Ut={class:"script-setting-content-text"},yt={class:"grid-content-broadcast-btns"},wt={class:"script-setting-content"},Dt={class:"script-setting-content-text"},Vt={class:"grid-content-broadcast-btns"},Lt={class:"script-setting-content"},St={class:"script-setting-content-text"},Ot={class:"grid-content-broadcast-btns"},Mt=K({__name:"index",setup(Ft){const m=p(""),U=p(!1),y=p(!1),f=p(!1),V=p("2"),g=p("感谢 {user_name} 的点赞"),_=p("感谢 {user_name} 的关注"),h=p("欢迎 {user_name} 老哥进入直播间"),C=p("感谢 {user_name} 的礼物"),o=P(),L=R([{text:"按顺序循环朗读",icon:I,activeIcon:A,isActive:!0},{text:"随机挑选句子",icon:I,activeIcon:A,isActive:!1}]),M=s=>{for(let t of L)t.isActive=!1;L[s].isActive=!0,s?V.value="1":V.value="2"};S(U,async(s,t)=>{H(s)}),S(y,async(s,t)=>{E(s)}),S(V,async(s,t)=>{console.log("readType changed:",s),await o.set_continuous_text_type(s).then(i=>{d.success("提示",{description:"切换成功"})}).catch(i=>{d.error("提示",{description:"切换失败"})})});const z=async()=>{f.value=!0;const s=m.value.split(`
`).filter(n=>n.trim()!=="");let t=[];s.forEach(n=>{const u=n.match(/[^。！？]+[。！？]+|[^。！？]+$/g);u?t.push(...u):t.push(n)}),t=t.filter(n=>{const u=n.trim();return u!==""&&u.length>=2});let i=[],r="";for(let n=0;n<t.length;n++)r+=t[n],r.length>=50&&(i.push(r),r="");r&&i.push(r),localStorage.setItem("AudioManager",m.value),console.log(i),await o.sovitsData(i).then(n=>{d.success("提示",{description:"正在开始"})}).catch(n=>{f.value=!1})},H=async s=>{console.log("submit!"),o.initData.frame=s,await o.frame(s).then(t=>{d.success("提示",{description:"操作成功"})}).catch(t=>{d.error("提示",{description:"操作失败"})})},E=async s=>{await o.zhipu_ai_write(o.initData.zhipu_api_key,o.initData.zhipu_model,o.initData.zhipu_system,s).then(t=>{d.success("提示",{description:"设置成功"})}).catch(t=>{d.error("提示",{description:"设置失败"})})},G=async()=>{f.value=!1,await o.stop_continuous_text_to_speech().then(s=>{d.success("提示",{description:"已关闭"})}).catch(s=>{d.error("提示",{description:"关闭失败"})})},W=()=>{m.value+=`

现在是{now_time}，活动还有5分钟就结束了，大家快来抢购。`};q(()=>{U.value=o.initData.frame,y.value=o.initData.use_zhipu,f.value=o.initData.stop_speech_loop;const s=localStorage.getItem("AudioManager");s&&(m.value=s);const t=localStorage.getItem("UserLikes");t&&(g.value=t);const i=localStorage.getItem("UserLoves");i&&(_.value=i);const r=localStorage.getItem("UserWelcomes");r&&(h.value=r);const n=localStorage.getItem("UserGifts");n&&(C.value=n)});const B=async()=>{let s=g.value.split(/[\n]+/);o.initData.UserLikesOff=!0;let t=s.filter(i=>i.trim()!=="");localStorage.setItem("UserLikes",g.value),await o.UserLikesData(t).then(i=>{d.success("提示",{description:"已开启点赞感谢"})}).catch(i=>{o.initData.UserLikesOff=!1})},$=async()=>{let s=_.value.split(/[\n]+/);o.initData.UserLovesOff=!0;let t=s.filter(i=>i.trim()!=="");localStorage.setItem("UserLoves",_.value),await o.UserLovesData(t).then(i=>{d.success("提示",{description:"已开关注赞感谢"})}).catch(i=>{o.initData.UserLovesOff=!1}),console.log(t)},j=async()=>{let s=h.value.split(/[\n]+/);o.initData.UserWelcomesOff=!0;let t=s.filter(i=>i.trim()!=="");localStorage.setItem("UserWelcomes",h.value),await o.UserWelcomesData(t).then(i=>{d.success("提示",{description:"已开欢迎赞感谢"})}).catch(i=>{console.log(i),o.initData.UserWelcomesOff=!1}),console.log(t)},N=async()=>{let s=C.value.split(/[\n]+/);o.initData.UserGiftsOff=!0;let t=s.filter(i=>i.trim()!=="");localStorage.setItem("UserGifts",C.value),await o.UserGiftsData(t).then(i=>{d.success("提示",{description:"已开礼物感谢"})}).catch(i=>{console.log(i),o.initData.UserGiftsOff=!1}),console.log(t)},w=async s=>{await o.stop_speech(s).then(t=>{o.initData[s]=!1,d.success("提示",{description:"已关闭"})}).catch(t=>{d.error("提示",{description:"关闭失败"})})},T=()=>{X.push("/intelligent_rewriting/index")};return(s,t)=>{const i=x("el-switch"),r=x("el-button"),n=x("el-input"),u=x("el-col"),Z=x("el-row");return k(),b("div",tt,[e("div",et,[e("div",st,[t[18]||(t[18]=e("div",{class:"grid-content-title"},"主话术设置",-1)),e("div",ot,[e("div",it,[e("div",lt,[e("div",at,[t[11]||(t[11]=e("span",{class:"span"},"主话术实时重写",-1)),a(i,{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=l=>y.value=l)},null,8,["modelValue"])]),e("a",{class:"link",href:"javascript:;",onClick:T},"配置")]),t[12]||(t[12]=e("div",{class:"subtitle"},"是否开启AI文案实时重写功能，每次开播建议重新开关注主话术",-1))]),e("div",nt,[e("div",rt,[e("div",ct,[t[13]||(t[13]=e("span",{class:"span"},"音频抽帧去重",-1)),a(i,{modelValue:U.value,"onUpdate:modelValue":t[1]||(t[1]=l=>U.value=l)},null,8,["modelValue"])])]),t[14]||(t[14]=e("div",{class:"subtitle"},"不开重写可打开这个进行去重",-1))]),e("div",{class:"grid-content-set-item"},[e("div",{class:"switch-block"},[t[15]||(t[15]=e("div",{class:"switch-block-item"},[e("span",{class:"span"},"添加时间播报")],-1)),e("a",{class:"link",href:"javascript:;",onClick:W},"添加至主话术")]),t[16]||(t[16]=e("div",{class:"subtitle"},"例如：现在是14：55分，还有5分钟活动就结束了",-1))])]),e("div",dt,[e("div",ut,[e("div",vt,[(k(!0),b(J,null,Q(L,(l,O)=>(k(),b("div",{class:Y(["item",{active:l.isActive}]),key:O,onClick:It=>M(O)},[l.isActive?(k(),b("img",{key:0,class:"icon",src:l.activeIcon,alt:""},null,8,mt)):(k(),b("img",{key:1,class:"icon",src:l.icon,alt:""},null,8,ft)),e("span",null,F(l.text),1)],10,pt))),128))]),e("div",gt,[a(r,{color:"#3E61FF",onClick:z},{default:c(()=>[v(F(f.value?"更新话术":"开始朗读"),1)]),_:1}),a(r,{onClick:G},{default:c(()=>t[17]||(t[17]=[v("停止")])),_:1})])]),e("div",_t,[a(n,{type:"textarea",autocomplete:"off",modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=l=>m.value=l),placeholder:"请输入内容",style:{height:"281px"}},null,8,["modelValue"])])])]),e("div",ht,[a(Z,{gutter:16},{default:c(()=>[a(u,{xs:12,sm:12,md:12,lg:6,xl:6},{default:c(()=>[e("div",Ct,[t[21]||(t[21]=e("div",{class:"script-setting-content-title"},"点赞感谢话术设置",-1)),e("div",bt,[a(n,{type:"textarea",style:{height:"350px"},placeholder:"一个折行算一句",modelValue:g.value,"onUpdate:modelValue":t[3]||(t[3]=l=>g.value=l)},null,8,["modelValue"])]),e("div",xt,[a(r,{color:"#3E61FF",disabled:D(o).initData.UserLikesOff,onClick:B},{default:c(()=>t[19]||(t[19]=[v("开始点赞感谢")])),_:1},8,["disabled"]),a(r,{onClick:t[4]||(t[4]=l=>w("UserLikesOff"))},{default:c(()=>t[20]||(t[20]=[v("停止")])),_:1})])])]),_:1}),a(u,{xs:12,sm:12,md:12,lg:6,xl:6},{default:c(()=>[e("div",kt,[t[24]||(t[24]=e("div",{class:"script-setting-content-title"},"欢迎话术设置",-1)),e("div",Ut,[a(n,{type:"textarea",style:{height:"350px"},placeholder:"一个折行算一句",modelValue:h.value,"onUpdate:modelValue":t[5]||(t[5]=l=>h.value=l)},null,8,["modelValue"])]),e("div",yt,[a(r,{color:"#3E61FF",disabled:D(o).initData.UserWelcomesOff,onClick:j},{default:c(()=>t[22]||(t[22]=[v("开始欢迎")])),_:1},8,["disabled"]),a(r,{onClick:t[6]||(t[6]=l=>w("UserWelcomesOff"))},{default:c(()=>t[23]||(t[23]=[v("停止")])),_:1})])])]),_:1}),a(u,{xs:12,sm:12,md:12,lg:6,xl:6},{default:c(()=>[e("div",wt,[t[27]||(t[27]=e("div",{class:"script-setting-content-title"},"关注感谢话术设置",-1)),e("div",Dt,[a(n,{type:"textarea",style:{height:"350px"},placeholder:"一个折行算一句",modelValue:_.value,"onUpdate:modelValue":t[7]||(t[7]=l=>_.value=l)},null,8,["modelValue"])]),e("div",Vt,[a(r,{color:"#3E61FF",disabled:D(o).initData.UserLovesOff,onClick:$},{default:c(()=>t[25]||(t[25]=[v("开始关注感谢")])),_:1},8,["disabled"]),a(r,{onClick:t[8]||(t[8]=l=>w("UserLovesOff"))},{default:c(()=>t[26]||(t[26]=[v("停止")])),_:1})])])]),_:1}),a(u,{xs:12,sm:12,md:12,lg:6,xl:6},{default:c(()=>[e("div",Lt,[t[30]||(t[30]=e("div",{class:"script-setting-content-title"},"礼物感谢话术设置",-1)),e("div",St,[a(n,{type:"textarea",style:{height:"350px"},placeholder:"一个折行算一句",modelValue:C.value,"onUpdate:modelValue":t[9]||(t[9]=l=>C.value=l)},null,8,["modelValue"])]),e("div",Ot,[a(r,{color:"#3E61FF",disabled:D(o).initData.UserGiftsOff,onClick:N},{default:c(()=>t[28]||(t[28]=[v("开始礼物感谢")])),_:1},8,["disabled"]),a(r,{onClick:t[10]||(t[10]=l=>w("UserGiftsOff"))},{default:c(()=>t[29]||(t[29]=[v("停止")])),_:1})])])]),_:1})]),_:1})])])])}}});export{Mt as default};
