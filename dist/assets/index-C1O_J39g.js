
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as Y,r,u as j,N as M,o as N,c as w,e as s,w as i,f as u,g as v,b as t,h as C,F as $,L as I,A as S,C as R,t as E,D as W,B as G,M as c}from"./index-CT_znvxk.js";const J="data:image/svg+xml,%3csvg%20width='31'%20height='31'%20viewBox='0%200%2031%2031'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='11'%20width='22'%20height='22'%20rx='4'%20transform='rotate(30%2011%200)'%20fill='%233E61FF'%20fill-opacity='0.2'/%3e%3crect%20x='2.70098'%20y='4.7'%20width='20.6'%20height='20.6'%20rx='3.3'%20fill='white'%20stroke='%233E61FF'%20stroke-width='1.4'/%3e%3cpath%20d='M7.17123%2012H8.14981L10.3201%2017.6348H9.39672L8.86797%2016.1827H6.44518L5.91643%2017.6348H5.00098L7.17123%2012ZM6.70561%2015.4724H8.60754L7.6763%2012.9233H7.64474L6.70561%2015.4724Z'%20fill='%233E61FF'/%3e%3cpath%20d='M16.001%2012H18.5737C19.1261%2012%2019.5523%2012.1263%2019.868%2012.3946C20.1679%2012.6471%2020.3178%2012.9865%2020.3178%2013.4205C20.3178%2013.7362%2020.2389%2014.0045%2020.081%2014.2255C19.9232%2014.4307%2019.7101%2014.5885%2019.426%2014.6911C19.7969%2014.7621%2020.081%2014.9121%2020.2704%2015.1409C20.4599%2015.3698%2020.5546%2015.6776%2020.5546%2016.0564C20.5546%2016.6246%2020.3573%2017.035%2019.9706%2017.3033C19.6391%2017.5243%2019.1735%2017.6348%2018.5737%2017.6348H16.001V12ZM16.8612%2012.7103V14.3912H18.3448C18.7394%2014.3912%2019.0235%2014.3202%2019.1972%2014.186C19.3708%2014.044%2019.4576%2013.823%2019.4576%2013.5231C19.4576%2013.239%2019.3708%2013.0338%2019.1972%2012.9076C19.0235%2012.7734%2018.7394%2012.7103%2018.3606%2012.7103H16.8612ZM16.8612%2015.0936V16.9245H18.4553C18.8184%2016.9245%2019.1025%2016.8614%2019.3076%2016.7509C19.5602%2016.6009%2019.6943%2016.3642%2019.6943%2016.0406C19.6943%2015.7092%2019.5918%2015.4645%2019.3945%2015.3146C19.1972%2015.1646%2018.8894%2015.0936%2018.479%2015.0936H16.8612Z'%20fill='%233E61FF'/%3e%3cpath%20d='M11.5264%2013.9106H14.2581L13.1199%2013'%20stroke='%233E61FF'%20stroke-width='0.8'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M14.2588%2015.9996H11.527L12.6652%2016.9102'%20stroke='%233E61FF'%20stroke-width='0.8'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",O="data:image/svg+xml,%3csvg%20width='22'%20height='22'%20viewBox='0%200%2022%2022'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0.700977'%20y='0.7'%20width='20.6'%20height='20.6'%20rx='3.3'%20fill='white'%20stroke='%23303E52'%20stroke-width='1.4'/%3e%3cpath%20d='M15.1702%204H16.1488L18.3191%209.63476H17.3957L16.867%208.18266H14.4442L13.9155%209.63476H13L15.1702%204ZM14.7046%207.4724H16.6066L15.6753%204.92334H15.6438L14.7046%207.4724Z'%20fill='%23303E52'/%3e%3cpath%20d='M16%2011V13.5C16%2014.5%2016%2015.5%2014%2015.5H12'%20stroke='%23303E52'%20stroke-width='0.8'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M10.1414%2015.3586L11.1586%2014.3414C11.2846%2014.2154%2011.5%2014.3047%2011.5%2014.4828V16.5172C11.5%2016.6953%2011.2846%2016.7846%2011.1586%2016.6586L10.1414%2015.6414C10.0633%2015.5633%2010.0633%2015.4367%2010.1414%2015.3586Z'%20fill='%23303E52'/%3e%3cpath%20d='M4%2013H6.57273C7.12516%2013%207.55132%2013.1263%207.86699%2013.3946C8.16688%2013.6471%208.31682%2013.9865%208.31682%2014.4205C8.31682%2014.7362%208.23791%2015.0045%208.08007%2015.2255C7.92223%2015.4307%207.70915%2015.5885%207.42505%2015.6911C7.79596%2015.7621%208.08007%2015.9121%208.26947%2016.1409C8.45888%2016.3698%208.55358%2016.6776%208.55358%2017.0564C8.55358%2017.6246%208.35628%2018.035%207.96958%2018.3033C7.63813%2018.5243%207.17251%2018.6348%206.57273%2018.6348H4V13ZM4.86021%2013.7103V15.3912H6.34387C6.73846%2015.3912%207.02257%2015.3202%207.19619%2015.186C7.36981%2015.044%207.45662%2014.823%207.45662%2014.5231C7.45662%2014.239%207.36981%2014.0338%207.19619%2013.9076C7.02257%2013.7734%206.73846%2013.7103%206.35965%2013.7103H4.86021ZM4.86021%2016.0936V17.9245H6.45435C6.81738%2017.9245%207.10148%2017.8614%207.30667%2017.7509C7.55921%2017.6009%207.69337%2017.3642%207.69337%2017.0406C7.69337%2016.7092%207.59078%2016.4645%207.39348%2016.3146C7.19619%2016.1646%206.8884%2016.0936%206.47803%2016.0936H4.86021Z'%20fill='%23303E52'/%3e%3c/svg%3e",Q="data:image/svg+xml,%3csvg%20width='16'%20height='19'%20viewBox='0%200%2016%2019'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.26367%208.1352C5.26367%208.09105%205.28121%208.04872%205.31242%208.0175C5.34364%207.98629%205.38598%207.96875%205.43012%207.96875H6.76172C6.80587%207.96875%206.8482%207.98629%206.87942%208.0175C6.91063%208.04872%206.92817%208.09105%206.92817%208.1352V13.1287C6.92817%2013.1728%206.91063%2013.2152%206.87942%2013.2464C6.8482%2013.2776%206.80587%2013.2951%206.76172%2013.2951H5.43012C5.38598%2013.2951%205.34364%2013.2776%205.31242%2013.2464C5.28121%2013.2152%205.26367%2013.1728%205.26367%2013.1287V8.1352ZM10.7565%208.1352C10.7565%208.09105%2010.739%208.04872%2010.7078%208.0175C10.6766%207.98629%2010.6342%207.96875%2010.5901%207.96875H9.25847C9.21432%207.96875%209.17199%207.98629%209.14077%208.0175C9.10956%208.04872%209.09202%208.09105%209.09202%208.1352V13.1287C9.09202%2013.1728%209.10956%2013.2152%209.14077%2013.2464C9.17199%2013.2776%209.21432%2013.2951%209.25847%2013.2951H10.5901C10.6342%2013.2951%2010.6766%2013.2776%2010.7078%2013.2464C10.739%2013.2152%2010.7565%2013.1728%2010.7565%2013.1287V8.1352Z'%20fill='%23303E52'/%3e%3cpath%20d='M4.03641%203.07932V0.6658C4.03641%200.298091%204.3345%200%204.70221%200H11.3602C11.7279%200%2012.026%200.298091%2012.026%200.6658V3.07932H15.8336C15.8777%203.07932%2015.92%203.09686%2015.9512%203.12808C15.9825%203.15929%2016%203.20163%2016%203.24577V4.57737C16%204.62152%2015.9825%204.66386%2015.9512%204.69507C15.92%204.72629%2015.8777%204.74382%2015.8336%204.74382H14.6892V17.9558C14.6892%2018.3235%2014.3911%2018.6216%2014.0234%2018.6216H2.03901C1.6713%2018.6216%201.37321%2018.3235%201.37321%2017.9558V4.74382H0.16645C0.122305%204.74382%200.0799673%204.72629%200.0487519%204.69507C0.0175365%204.66386%200%204.62152%200%204.57737V3.24577C0%203.20163%200.0175365%203.15929%200.0487519%203.12808C0.0799673%203.09686%200.122305%203.07932%200.16645%203.07932H4.03641ZM5.70091%201.6645V3.07932H10.3615V1.6645H5.70091ZM3.03771%204.74382V16.9571H13.0247V4.74382H3.03771Z'%20fill='%23303E52'/%3e%3c/svg%3e",X={style:{padding:"16px"}},e2={class:"PageMain"},t2={class:"grid-content"},s2={class:"grid-content"},o2={class:"fixed"},l2={class:"PageMain"},i2={class:"grid-content",style:{height:"998px"}},a2={class:"btnChange"},n2={class:"btnTooTip"},d2={key:0,src:J,alt:""},r2={key:1,src:O,alt:""},u2={class:"triangle-up"},c2={class:"input-block"},p2={class:"buttonBox flex"},_2={class:"prohibitedWords"},h2={class:"prohibitedWords-title"},m2={class:"el-form-item__label"},v2={style:{color:"red"}},C2={class:"buttonBox flex"},f2={class:"input-block"},g2={class:"input-box"},x2={class:"input-box"},w2=["onClick"],V2=Y({__name:"index",setup(y2){const h=r(""),f=r(""),n=j(),y=r(""),V=r(!0),H=r(),m=r([]),p=r(!1),z=r(""),a=M({zhipu_model:"",zhipu_api_key:"",zhipu_system:""});function A(l){l.validate(async e=>{e?await n.zhipu_ai_write(a.zhipu_api_key,a.zhipu_model,a.zhipu_system,V.value).then(d=>{c.success("提示",{description:"设置成功"})}).catch(d=>{c.error("提示",{description:"设置失败"})}):console.log("error submit!")})}const B=async()=>{await n.set_banned(p.value).then(l=>{c.success("提示",{description:"切换成功"})}).catch(l=>{c.error("提示",{description:"切换失败"})})};N(()=>{m.value=n.initData.BannedList,p.value=n.initData.BannedType;for(let l of _)l.isActive=!1;p.value?_[1].isActive=!0:_[0].isActive=!0,a.zhipu_api_key=n.initData.zhipu_api_key,a.zhipu_model=n.initData.zhipu_model,a.zhipu_system=n.initData.zhipu_system,V.value=n.initData.use_zhipu});const _=M([{text:"平替词替换",icon:"@/assets/icons/zhuanhuan",isActive:!0},{text:"原话术替换",icon:"@/assets/icons/zhuanhuan",isActive:!1}]);function Z(l){for(let e of _)e.isActive=!1;switch(_[l].isActive=!0,l){case 0:p.value=!1;break;case 1:p.value=!0;break}B()}const L=async()=>{await n.dy_banned(m.value).then(l=>{console.log(l),c.success("提示",{description:"操作成功"})}).catch(l=>{c.error("提示",{description:"操作失败"})})},D=async()=>{p.value=!1,await n.test_banned(y.value).then(l=>{console.log(l),c.success("提示",{description:"正在测试"}),z.value=l.data}).catch(l=>{c.error("提示",{description:"测试失败"})})},P=l=>{m.value.splice(l,1),L()},T=()=>{h.value&&(m.value.push({band:h.value,bandlst:f.value}),h.value="",f.value="",L())};return(l,e)=>{const d=u("el-input"),g=u("el-form-item"),x=u("el-button"),K=u("el-form"),F=u("el-col"),b=u("el-table-column"),q=u("el-table"),U=u("el-row");return v(),w("div",X,[s(U,{gutter:16},{default:i(()=>[s(F,{xs:24,sm:24,md:24,lg:12,xl:12},{default:i(()=>[s(K,{ref_key:"formRef",ref:H,model:a,"label-width":"auto",class:"demo-ruleForm"},{default:i(()=>[t("div",e2,[t("div",t2,[s(g,{label:"model",prop:"zhipu_model",rules:[{required:!0,message:"model 是必填项"}]},{default:i(()=>[s(d,{type:"text",modelValue:a.zhipu_model,"onUpdate:modelValue":e[0]||(e[0]=o=>a.zhipu_model=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e[7]||(e[7]=t("div",{class:"height12"},null,-1)),s(g,{label:"APL_KEY",prop:"zhipu_api_key",rules:[{required:!0,message:"API_KEY 是必填项"}]},{default:i(()=>[s(d,{type:"zhipu_api_key",modelValue:a.zhipu_api_key,"onUpdate:modelValue":e[1]||(e[1]=o=>a.zhipu_api_key=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e[8]||(e[8]=t("div",{class:"APL_KEY"},[t("a",{class:"APL_KEY_link",target:"_blank",href:"https://www.yuque.com/zhibaoai/cu4g1z/two6i9iiqn7hum7l?singleDoc# "},"我想用自己的APL_KEY，如何获取？")],-1))]),t("div",s2,[t("div",o2,[s(g,null,{default:i(()=>[s(x,{color:"#3E61FF",onClick:e[2]||(e[2]=o=>A(H.value))},{default:i(()=>e[9]||(e[9]=[C(" 设置 ")])),_:1})]),_:1})]),s(g,{style:{"margin-bottom":"0"},label:"告诉AI重写话术你希望怎么做",prop:"zhipu_system",rules:[{required:!0,message:"text is required"}]},{default:i(()=>[s(d,{type:"textarea",modelValue:a.zhipu_system,"onUpdate:modelValue":e[3]||(e[3]=o=>a.zhipu_system=o),style:{height:"583px"},placeholder:"你是一个句子重写作家，请按以下要求改写输入句子:替换部分字词，保持原句核心意思不变，且字数与原句致。仅进行部分字词替换，不添加额外说明、问候或结束语。改写结果须适用于语音合成，仅采用中文，不含任何英文内容。确保改写文本中不出现涉及资金、虚拟形急、无人操作,无人直播，以及优患等描述，也避免使用极限性描述词。我提供的句子:"},null,8,["modelValue"])]),_:1})])])]),_:1},8,["model"])]),_:1}),s(F,{xs:24,sm:24,md:24,lg:12,xl:12},{default:i(()=>[t("div",l2,[t("div",i2,[t("div",a2,[t("div",n2,[(v(!0),w($,null,I(_,(o,k)=>(v(),S(x,{class:G(["item",{active:o.isActive}]),key:k,onClick:b2=>Z(k)},{default:i(()=>[o.isActive?(v(),w("img",d2)):(v(),w("img",r2)),C(" "+E(o.text)+" ",1),R(t("div",u2,null,512),[[W,o.isActive]])]),_:2},1032,["class","onClick"]))),128))]),e[10]||(e[10]=t("div",{class:"tooTip"},[t("span",{style:{"font-size":"16px",color:"#303e52"}},"请输入您的测试文案："),t("span",{style:{"font-size":"16px",color:"#3e61ff"}},"文案 → 重写 → 检测违禁词 → 最终文案，测试文案只可测试平替违禁词")],-1))]),t("div",c2,[s(d,{modelValue:y.value,"onUpdate:modelValue":e[4]||(e[4]=o=>y.value=o),type:"text",placeholder:"请输入您要模拟的弹幕"},null,8,["modelValue"])]),t("div",p2,[s(x,{color:"#3E61FF",onClick:D},{default:i(()=>e[11]||(e[11]=[C(" 测试 ")])),_:1})]),t("div",_2,[t("div",h2,[t("div",m2,[e[12]||(e[12]=C(" 测试返回的文案： ")),t("span",v2,E(z.value),1)]),t("div",C2,[s(x,{color:"#3E61FF",onClick:T},{default:i(()=>e[13]||(e[13]=[C(" 添加违禁词 ")])),_:1})])]),t("div",f2,[t("div",g2,[s(d,{modelValue:h.value,"onUpdate:modelValue":e[5]||(e[5]=o=>h.value=o),style:{"max-width":"600px"},type:"text",placeholder:"输入违禁词"},null,8,["modelValue"])]),t("div",x2,[s(d,{modelValue:f.value,"onUpdate:modelValue":e[6]||(e[6]=o=>f.value=o),style:{"max-width":"600px"},type:"text",placeholder:"平替违禁词"},null,8,["modelValue"])])]),s(q,{data:m.value,border:"",style:{width:"100%"},"max-height":"500px"},{default:i(()=>[s(b,{prop:"band",label:"违禁词",align:"center","show-overflow-tooltip":""}),s(b,{prop:"bandlst",label:"平替违禁词",align:"center","show-overflow-tooltip":""}),s(b,{label:"操作",align:"center"},{default:i(o=>[t("a",{href:"javascript:;",style:{display:"inline-block",width:"16px",height:"19px"},onClick:k=>P(o.$index)},e[14]||(e[14]=[t("img",{style:{width:"16px",height:"19px"},src:Q,alt:""},null,-1)]),8,w2)]),_:1})]),_:1},8,["data"])])])])]),_:1})]),_:1})])}}});export{V2 as default};
