
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as bt,N as kt,r as u,u as Ct,o as Ut,z as Ft,M as c,c as x,b as e,F as Q,L as J,e as i,w as a,f as D,g,C as it,h as d,D as at,p as v,Q as F,A as T,s as R,t as X,B as Bt,R as It}from"./index-CT_znvxk.js";import{_ as St}from"./Vector-BpqaxEIj.js";const Et={style:{padding:"0 16px"}},Tt={class:"tags"},$t={class:"PageMain"},Mt={class:"grid-content min-height436"},Ot={class:"grid-content-item marginBottom40"},qt={class:"grid-content-item-title flex"},Lt={class:"buttonBox flex"},Nt=["src"],zt={class:"grid-content-item"},Pt={class:"grid-content-item-title flex"},Rt={class:"buttonBox flex"},Wt={class:"grid-content min-height436"},At={class:"grid-content-item marginBottom16 border"},Gt={class:"grid-content-item-title flex"},jt={class:"buttonBox flex"},Kt={class:"slider-block"},Yt={class:"grid-content-item border"},Ht={class:"radio-block"},Qt={class:"grid-content min-height436"},Jt={class:"PageMain"},Xt={class:"grid-content min-height234"},Zt={class:"grid-content-item"},te={class:"grid-content-item-title flex"},ee={class:"radio-block"},se={key:0},le={class:"buttonBox flex"},oe={key:1},ie={class:"buttonBox flex"},ae={key:0},ne={key:1},de=["src"],re={class:"grid-content min-height234"},ue={class:"grid-content-item marginBottom16"},ce={class:"input-block"},pe={class:"buttonBox flex"},ve={class:"grid-content min-height234"},me={class:"grid-content-item marginBottom16"},ge={class:"input-block"},_e={class:"buttonBox flex"},fe={class:"grid-content min-height234"},xe={class:"grid-content-item marginBottom16"},De={class:"input-block"},he={class:"buttonBox flex"},ye={class:"grid-content min-height234"},Ve={class:"grid-content-item marginBottom16"},we={class:"input-block"},be={class:"buttonBox flex"},ke={class:"grid-content min-height234"},Ce={class:"grid-content-item marginBottom16"},Ue={class:"input-block"},Fe={class:"buttonBox flex"},Be={class:"grid-content min-height234"},Ie={class:"grid-content-item marginBottom16"},Se={class:"input-block"},Ee={class:"buttonBox flex"},Oe=bt({__name:"index",setup(Te){const r=kt([{title:"密钥名称",value:"自用11"},{title:"到期时间",value:"108天 6小时 44分钟 38秒",class:"color3"},{title:"音频文件3-10秒",value:"未上传",class:"color1"},{title:"主线音频",value:"未开启",class:"color1"},{title:"抖音直播间",value:"未连接/直播已结束",class:"color1"},{title:"视频号直播间",value:"未连接/直播已结束",class:"color1"},{title:"点赞感谢",value:"未开启",class:"color1"},{title:"欢迎语",value:"未开启",class:"color1"},{title:"礼物感谢",value:"未开启",class:"color1"},{title:"智能回复",value:"未开启",class:"color1"},{title:"sovit训练模型",value:"未上传",class:"color1"},{title:"GPT训练模型",value:"未上传",class:"color1"}]);let Z=u(""),B=u("");const s=Ct();let y=u(""),U=u(16),tt=u(8),h=u(1),w=u("");const W=u(!1),b=u(!0),et=u(""),$=u(""),k=u([]),I=u(""),M=u(.1),O=u(.1),q=u(.1),L=u(.1),N=u(.1),z=u(.1),P=u(.1),st=u([]),A=u(""),G=u(""),nt=l=>{const t=new Date(l),n=setInterval(()=>{const p=t-new Date;if(p<=0)clearInterval(n),et.value="已过期",admin.value=!1;else{const m=Math.floor(p/864e5),_=Math.floor(p%(1e3*60*60*24)/(1e3*60*60)),S=Math.floor(p%(1e3*60*60)/(1e3*60)),V=Math.floor(p%(1e3*60)/1e3);et.value=`${m}天 ${_}小时 ${S}分钟 ${V}秒`}},1e3);return n},dt=async()=>{await s.set_all_model("V3")};function rt(l){const n=Date.parse(l)+8*36e5,f=new Date(n),p=E=>E.toString().padStart(2,"0"),m=f.getUTCFullYear(),_=p(f.getUTCMonth()+1),S=p(f.getUTCDate()),V=p(f.getUTCHours()),K=p(f.getUTCMinutes()),Y=p(f.getUTCSeconds());return`${m}-${_}-${S} ${V}:${K}:${Y}`}const j=()=>{s.getConfig().then(l=>{console.log(r[0].value),r[0].value=s.name,r[1].value=rt(s.time),r[2].value=s.initData.config_data.ref_audio_path?"已上传":"未上传",r[2].class=s.initData.config_data.ref_audio_path?"color2":"color1",r[3].value=s.initData.stop_speech_loop?"已开启":"未开启",r[3].class=s.initData.stop_speech_loop?"color2":"color1",r[4].value=s.initData.liveId?"已连接":"未连接",r[4].class=s.initData.liveId?"color2":"color1",r[5].value=s.initData.qrStatus?"未连接":"已连接",r[5].class=s.initData.qrStatus?"color1":"color2",r[6].value=s.initData.UserLikesOff?"已开启":"未开启",r[6].class=s.initData.UserLikesOff?"color2":"color1",r[7].value=s.initData.UserWelcomesOff?"已开启":"未开启",r[7].class=s.initData.UserWelcomesOff?"color2":"color1",r[8].value=s.initData.UserGiftsOff?"已开启":"未开启",r[8].class=s.initData.UserGiftsOff?"color2":"color1",r[9].value=s.initData.UserAiOff?"已开启":"未开启",r[9].class=s.initData.UserAiOff?"color2":"color1",r[10].value=s.initData.sovits_weights?"已上传":"未上传",r[10].class=s.initData.sovits_weights?"color2":"color1",r[11].value=s.initData.gpt_weights?"已上传":"未上传",r[11].class=s.initData.gpt_weights?"color2":"color1",console.log(r),B.value=s.initData.ref_audio_path||"",y.value=s.initData.prompt_text||"",U.value=s.initData.speed_factor,tt.value=s.initData.nfe_step,b.value=s.initData.interrupt_zindex1,k.value=s.initData.no_name,M.value=s.initData.all_space,O.value=s.initData.all_space_last,q.value=s.initData.likes_space,L.value=s.initData.welcomes_space,N.value=s.initData.loves_space,z.value=s.initData.gifts_space,P.value=s.initData.keys_ai,A.value=s.initData.gpt_weights,G.value=s.initData.sovits_weights})};Ut(()=>{j(),dt(),ot(),w.value=localStorage.getItem("liveID"),s.startCountTime&&nt(s.startCountTime)});const ut=l=>{const t=l.filename.substring(0,l.filename.lastIndexOf("."));y.value=t,$.value=`http://localhost:3201/api/audioV3/${l.filename}`,console.log($.value)},ct=async l=>{console.log(l);const t=k.value.indexOf(l);t>-1&&k.value.splice(t,1),await s.setNoRead(k.value).then(n=>{c.success("提示",{description:"删除成功"})}).catch(n=>{c.error("提示",{description:"操作失败"})})},pt=()=>{W.value=!0},lt=async()=>{I.value&&k.value.push(I.value),W.value=!1,I.value="",await s.setNoRead(k.value).then(l=>{c.success("提示",{description:"添加成功"})}).catch(l=>{c.error("提示",{description:"操作失败"})})},vt=async l=>{const t=l.match(/\/(\d+)$/);return t?t[1]:null},mt=async l=>{const t=await vt(w.value);if(!t){c.error("提示",{description:"无法提取直播间ID，请检查链接格式"});return}s.initData.liveId=t,localStorage.setItem("liveID",w.value),await s.start_fetching(t).then(n=>{c.success("提示",{description:"连接成功"}),j()}).catch(n=>{c.error("提示",{description:"连接失败"})})},gt=async l=>{s.initData.liveId="",await s.stop_fetching().then(t=>{c.success("提示",{description:"断开成功"}),j()}).catch(t=>{c.error("提示",{description:"断开失败"})})},_t=async()=>{await s.setConfig(Z.value,y.value).then(l=>{console.log(l),c.success("提示",{description:"设置成功"})}).catch(l=>{console.log(l),c.error("提示",{description:"设置失败"})})},C=async()=>{var l={speed_factor:U.value,welcomes_space:L.value*1,loves_space:N.value*1,likes_space:q.value*1,gifts_space:z.value*1,keys_ai:P.value*1,all_space:M.value*1,nfe_step:tt.value,all_space_last:O.value*1};await s.setProIndex(l).then(t=>{console.log(t),c.success("提示",{description:"设置成功"})}).catch(t=>{console.log(t),c.error("提示",{description:"设置失败"})})};Ft(b,async(l,t)=>{ft()});const ft=async()=>{await s.set_interrupt(b.value).then(l=>{console.log(l),c.success("提示",{description:"设置成功"})}).catch(l=>{console.log(l),c.error("提示",{description:"设置失败"})})},xt=async()=>{s.initData.qrStatus=10,await s.wx_login().then(l=>{console.log(l),c.success("提示",{description:"获取成功，请及时扫码"})}).catch(l=>{console.log(l),c.error("提示",{description:"获取失败"})})},ot=async()=>{await s.v3_tts().then(l=>{st.value=l,console.log(l)}).catch(l=>{console.log(l),c.error("提示",{description:"获取失败"})})},Dt=async l=>{await s.v3_tts_files(l).then(t=>{console.log(t),ht(t)}).catch(t=>{console.log(t),c.error("提示",{description:"获取失败"})})},ht=l=>{l&&l.forEach(t=>{const{absolute_path:n,filename:f}=t,p=f.toLowerCase();if(p.endsWith(".ckpt"))A.value=n;else if(p.endsWith(".pth"))G.value=n;else{Z.value=n;const m=f.replace(/\.[^/.]+$/,"");y.value=m,ut({filename:f})}})},yt=async()=>{await s.set_sovits_weights(G.value).then(l=>{console.log(l),c.success("提示",{description:"设置sovits模型成功"})}).catch(l=>{console.log(l),c.error("提示",{description:"设置sivits失败"})})},Vt=async()=>{await s.set_gpt_weights(A.value).then(l=>{console.log(l),c.success("提示",{description:"设置gpt模型成功"})}).catch(l=>{console.log(l),c.error("提示",{description:"获取gpt失败"})})},wt=()=>{Vt(),yt(),_t()};return(l,t)=>{const n=D("el-button"),f=D("el-option"),p=D("el-select"),m=D("el-input"),_=D("el-col"),S=D("el-slider"),V=D("el-radio"),K=D("ElTag"),Y=D("ElInput"),E=D("el-row");return g(),x("div",Et,[e("div",Tt,[(g(!0),x(Q,null,J(r,(o,H)=>it((g(),x("div",{key:H,class:"tags-item"},[e("span",null,X(o.title)+": ",1),e("span",{class:Bt(o.class)},X(o.value),3)])),[[at,H>1]])),128))]),e("div",$t,[i(E,{gutter:16},{default:a(()=>[i(_,{xs:24,sm:24,md:24,lg:8,xl:8},{default:a(()=>[e("div",Mt,[e("div",Ot,[e("div",qt,[t[20]||(t[20]=e("div",{class:"descriptions"},"选择音频文件3-10秒之间",-1)),e("div",Lt,[i(n,{color:"#3E61FF",onClick:t[0]||(t[0]=o=>ot()),plain:""},{default:a(()=>t[18]||(t[18]=[d("刷新音频")])),_:1}),i(n,{color:"#3E61FF",onClick:t[1]||(t[1]=o=>{l.$refs.audio.load(),l.$refs.audio.play()})},{default:a(()=>t[19]||(t[19]=[e("img",{class:"btn-icon",src:St,alt:""},null,-1),d(" 试听 ")])),_:1})])]),it(e("audio",{ref:"audio",style:{height:"20px"},controls:"",src:$.value},null,8,Nt),[[at,$.value]]),i(p,{modelValue:v(B),"onUpdate:modelValue":t[2]||(t[2]=o=>F(B)?B.value=o:B=o),filterable:"",placeholder:"请选择音频文件",onChange:Dt,class:"custom-select"},{default:a(()=>[(g(!0),x(Q,null,J(st.value,o=>(g(),T(f,{key:o.absolute_path,label:o.filename,value:o.absolute_path},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),e("div",zt,[e("div",Pt,[t[22]||(t[22]=e("div",{class:"descriptions"}," 音频参考文字 ",-1)),e("div",Rt,[i(n,{color:"#3E61FF",onClick:wt},{default:a(()=>t[21]||(t[21]=[d(" 设置 ")])),_:1})])]),i(m,{modelValue:v(y),"onUpdate:modelValue":t[3]||(t[3]=o=>F(y)?y.value=o:y=o),autosize:"",type:"textarea","show-word-limit":"",style:{height:"211px"},maxlength:"80",placeholder:"请输入音频参考文字"},null,8,["modelValue"])])])]),_:1}),i(_,{xs:24,sm:24,md:24,lg:8,xl:8},{default:a(()=>[e("div",Wt,[e("div",At,[e("div",Gt,[t[24]||(t[24]=e("div",{class:"descriptions"}," 生成语速 ",-1)),e("div",jt,[i(n,{color:"#3E61FF",onClick:C},{default:a(()=>t[23]||(t[23]=[d(" 设置 ")])),_:1})])]),e("div",Kt,[i(S,{modelValue:v(U),"onUpdate:modelValue":t[4]||(t[4]=o=>F(U)?U.value=o:U=o),min:.1,max:1.65,step:.01},null,8,["modelValue"])])]),e("div",Yt,[t[27]||(t[27]=e("div",{class:"grid-content-item-title flex"},[e("div",{class:"descriptions"}," 回复弹幕或欢迎语触发方式 ")],-1)),e("div",Ht,[e("div",null,[i(V,{modelValue:b.value,"onUpdate:modelValue":t[5]||(t[5]=o=>b.value=o),value:!0},{default:a(()=>t[25]||(t[25]=[d(" 立即打断当前音频 ")])),_:1},8,["modelValue"])]),e("div",null,[i(V,{modelValue:b.value,"onUpdate:modelValue":t[6]||(t[6]=o=>b.value=o),value:!1},{default:a(()=>t[26]||(t[26]=[d(" 等待当前音频说完 ")])),_:1},8,["modelValue"])])])])])]),_:1}),i(_,{xs:24,sm:24,md:24,lg:8,xl:8},{default:a(()=>[e("div",Qt,[t[29]||(t[29]=e("div",{class:"descriptions"}," 添加场控，添加抖音昵称 ",-1)),t[30]||(t[30]=e("div",{class:"tips-color-red"}," 弹幕不会和以下这些人互动 ",-1)),(g(!0),x(Q,null,J(k.value,o=>(g(),T(K,{style:{margin:"0 5px"},key:o,onClose:H=>ct(o),closable:"",type:"danger"},{default:a(()=>[d(X(o),1)]),_:2},1032,["onClose"]))),128)),W.value?(g(),T(Y,{key:0,ref:"InputRef",modelValue:I.value,"onUpdate:modelValue":t[7]||(t[7]=o=>I.value=o),class:"w-20",placeholder:"请输入抖音昵称",size:"small",onKeyupEnter:lt,onBlur:lt},null,8,["modelValue"])):(g(),T(n,{key:1,color:"#3E61FF",type:"primary",onClick:pt,icon:v(It),plain:""},{default:a(()=>t[28]||(t[28]=[d(" 添加抖音昵称 ")])),_:1},8,["icon"]))])]),_:1})]),_:1})]),e("div",Jt,[i(E,{gutter:16},{default:a(()=>[i(_,{xs:24,sm:24,md:12,lg:12,xl:6},{default:a(()=>[e("div",Xt,[e("div",Zt,[e("div",te,[t[33]||(t[33]=e("div",{class:"descriptions"}," 链接直播间 ",-1)),e("div",ee,[i(V,{modelValue:v(h),"onUpdate:modelValue":t[8]||(t[8]=o=>F(h)?h.value=o:h=o),value:1},{default:a(()=>t[31]||(t[31]=[d(" 抖音 ")])),_:1},8,["modelValue"]),i(V,{modelValue:v(h),"onUpdate:modelValue":t[9]||(t[9]=o=>F(h)?h.value=o:h=o),value:2},{default:a(()=>t[32]||(t[32]=[d(" 视频号 ")])),_:1},8,["modelValue"])])]),t[37]||(t[37]=e("div",{class:"tips-color-blue"}," 点赞，欢迎礼物感谢，DeepSeek，需链接到直播间确保开播后再去链接 ",-1)),v(h)==1?(g(),x("div",se,[i(m,{modelValue:v(w),"onUpdate:modelValue":t[10]||(t[10]=o=>F(w)?w.value=o:w=o),style:{height:"50px","margin-bottom":"10px"},placeholder:"请输入抖音直播间链接，格式：https://live.douyin.com/288735743xxx",clearable:""},null,8,["modelValue"]),e("div",le,[i(n,{color:"#3E61FF",onClick:mt,disabled:v(s).initData.liveId!=""},{default:a(()=>t[34]||(t[34]=[d(" 连接 ")])),_:1},8,["disabled"]),i(n,{color:"#3E61FF",onClick:gt,disabled:v(s).initData.liveId=="",plain:""},{default:a(()=>t[35]||(t[35]=[d(" 断开 ")])),_:1},8,["disabled"])])])):(g(),x("div",oe,[e("div",ie,[v(s).initData.qrStatus?R("",!0):(g(),x("p",ae,"已连接")),v(s).initData.qrStatus===10?(g(),x("p",ne,"请稍后，获取中...")):R("",!0),v(s).initData.qrStatus===2||v(s).initData.qrStatus===3?(g(),x("img",{key:2,src:`data:image/png;base64,${v(s).initData.qrcode}`,alt:"二维码"},null,8,de)):R("",!0),v(s).initData.qrStatus===1?(g(),T(n,{key:3,type:"primary",size:"small",onClick:xt},{default:a(()=>t[36]||(t[36]=[d(" 获取二维码 ")])),_:1})):R("",!0)])]))])])]),_:1}),i(_,{xs:24,sm:24,md:12,lg:12,xl:6},{default:a(()=>[e("div",re,[e("div",ue,[t[42]||(t[42]=e("div",{class:"grid-content-item-title flex"},[e("div",{class:"descriptions"},[d(" 每句话的间隔"),e("span",null,"（取中间值随机）")])],-1)),e("div",ce,[i(m,{modelValue:M.value,"onUpdate:modelValue":t[11]||(t[11]=o=>M.value=o),style:{"max-width":"600px"},type:"number",placeholder:"请输入"},{append:a(()=>t[38]||(t[38]=[d(" 秒 ")])),_:1},8,["modelValue"]),t[40]||(t[40]=e("span",{class:"separate"},"~",-1)),i(m,{modelValue:O.value,"onUpdate:modelValue":t[12]||(t[12]=o=>O.value=o),style:{"max-width":"600px"},type:"number",placeholder:"请输入"},{append:a(()=>t[39]||(t[39]=[d(" 秒 ")])),_:1},8,["modelValue"])]),e("div",pe,[i(n,{color:"#3E61FF",onClick:C},{default:a(()=>t[41]||(t[41]=[d(" 应用 ")])),_:1})])])])]),_:1}),i(_,{xs:24,sm:24,md:12,lg:12,xl:6},{default:a(()=>[e("div",ve,[e("div",me,[t[45]||(t[45]=e("div",{class:"grid-content-item-title flex"},[e("div",{class:"descriptions"}," 点赞感谢多久触发一次 ")],-1)),e("div",ge,[i(m,{modelValue:q.value,"onUpdate:modelValue":t[13]||(t[13]=o=>q.value=o),style:{"max-width":"600px"},type:"number",placeholder:"请输入"},{append:a(()=>t[43]||(t[43]=[d(" 秒 ")])),_:1},8,["modelValue"])]),e("div",_e,[i(n,{color:"#3E61FF",onClick:C},{default:a(()=>t[44]||(t[44]=[d(" 应用 ")])),_:1})])])])]),_:1}),i(_,{xs:24,sm:24,md:12,lg:12,xl:6},{default:a(()=>[e("div",fe,[e("div",xe,[t[48]||(t[48]=e("div",{class:"grid-content-item-title flex"},[e("div",{class:"descriptions"}," 欢迎多久触发一次 ")],-1)),e("div",De,[i(m,{modelValue:L.value,"onUpdate:modelValue":t[14]||(t[14]=o=>L.value=o),style:{"max-width":"600px"},type:"number",placeholder:"请输入"},{append:a(()=>t[46]||(t[46]=[d(" 秒 ")])),_:1},8,["modelValue"])]),e("div",he,[i(n,{color:"#3E61FF",onClick:C},{default:a(()=>t[47]||(t[47]=[d(" 应用 ")])),_:1})])])])]),_:1})]),_:1}),i(E,{gutter:16},{default:a(()=>[i(_,{xs:24,sm:24,md:12,lg:12,xl:6},{default:a(()=>[e("div",ye,[e("div",Ve,[t[51]||(t[51]=e("div",{class:"grid-content-item-title flex"},[e("div",{class:"descriptions"}," 关注感谢多久触发一次 ")],-1)),e("div",we,[i(m,{modelValue:N.value,"onUpdate:modelValue":t[15]||(t[15]=o=>N.value=o),style:{"max-width":"600px"},type:"number",placeholder:"请输入"},{append:a(()=>t[49]||(t[49]=[d(" 秒 ")])),_:1},8,["modelValue"])]),e("div",be,[i(n,{color:"#3E61FF",onClick:C},{default:a(()=>t[50]||(t[50]=[d(" 应用 ")])),_:1})])])])]),_:1}),i(_,{xs:24,sm:24,md:12,lg:12,xl:6},{default:a(()=>[e("div",ke,[e("div",Ce,[t[54]||(t[54]=e("div",{class:"grid-content-item-title flex"},[e("div",{class:"descriptions"}," 礼物感谢多久触发一次 ")],-1)),e("div",Ue,[i(m,{modelValue:z.value,"onUpdate:modelValue":t[16]||(t[16]=o=>z.value=o),style:{"max-width":"600px"},type:"number",placeholder:"请输入"},{append:a(()=>t[52]||(t[52]=[d(" 秒 ")])),_:1},8,["modelValue"])]),e("div",Fe,[i(n,{color:"#3E61FF",onClick:C},{default:a(()=>t[53]||(t[53]=[d(" 应用 ")])),_:1})])])])]),_:1}),i(_,{xs:24,sm:24,md:12,lg:12,xl:6},{default:a(()=>[e("div",Be,[e("div",Ie,[t[57]||(t[57]=e("div",{class:"grid-content-item-title flex"},[e("div",{class:"descriptions"}," Deep Seek多久触发一次 ")],-1)),e("div",Se,[i(m,{modelValue:P.value,"onUpdate:modelValue":t[17]||(t[17]=o=>P.value=o),style:{"max-width":"600px"},type:"number",placeholder:"请输入"},{append:a(()=>t[55]||(t[55]=[d(" 秒 ")])),_:1},8,["modelValue"])]),e("div",Ee,[i(n,{color:"#3E61FF",onClick:C},{default:a(()=>t[56]||(t[56]=[d(" 应用 ")])),_:1})])])])]),_:1})]),_:1})])])}}});export{Oe as default};
