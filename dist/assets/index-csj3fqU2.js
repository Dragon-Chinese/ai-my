
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as y,a1 as Q,a2 as R,a3 as ie,r as L,Y as re,z as Z,A as g,g as u,w as m,$ as x,p as a,aX as de,y as w,o as J,c as B,e as $,aY as ce,W as E,a0 as ue,F as O,at as K,aD as S,aE as M,aZ as fe,ah as V,a_ as pe,a$ as _e,b0 as me,b1 as be,b2 as he,b3 as ge,ae as W,aQ as ve,aV as ye,s as D,L as j,h as ee,n as te,t as z,b4 as ae,H as se,l as ne,M as A,j as xe,b5 as Ce,au as U,ap as G,a9 as ke,b as P,E as H,ao as Ie,aq as $e,B as Be,C as Pe,ab as we,D as Se,_ as Me}from"./index-CT_znvxk.js";import{_ as Te}from"./index.vue_vue_type_script_setup_true_lang-BLaIMCdi.js";import{u as Y}from"./index-Dm59TdBK.js";import{u as Re}from"./useMainPage-dDQIUEei.js";import"./index.vue_vue_type_script_setup_true_lang-ChYkabeB.js";import"./eventBus-CGRXT3Tn.js";const[oe,Oe]=re("ContextMenuRoot"),De=y({inheritAttrs:!1,__name:"ContextMenuRoot",props:{dir:{},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(r,{emit:o}){const e=r,s=o,{dir:n,modal:c}=Q(e);R();const l=ie(n),f=L(!1),b=L();return Oe({open:f,onOpenChange:p=>{f.value=p},dir:l,modal:c,triggerElement:b}),Z(f,p=>{s("update:open",p)}),(p,k)=>(u(),g(a(de),{open:f.value,"onUpdate:open":k[0]||(k[0]=C=>f.value=C),dir:a(l),modal:a(c)},{default:m(()=>[x(p.$slots,"default")]),_:3},8,["open","dir","modal"]))}});function q(r){return r.pointerType!=="mouse"}const Ee=y({inheritAttrs:!1,__name:"ContextMenuTrigger",props:{disabled:{type:Boolean,default:!1},asChild:{type:Boolean},as:{default:"span"}},setup(r){const o=r,{disabled:e}=Q(o),{forwardRef:s,currentElement:n}=R(),c=oe(),l=L({x:0,y:0}),f=w(()=>({getBoundingClientRect:()=>({width:0,height:0,left:l.value.x,right:l.value.x,top:l.value.y,bottom:l.value.y,...l.value})})),b=L(0);function p(){window.clearTimeout(b.value)}function k(t){l.value={x:t.clientX,y:t.clientY},c.onOpenChange(!0)}async function C(t){e.value||(await K(),t.defaultPrevented||(p(),k(t),t.preventDefault()))}async function T(t){e.value||(await K(),q(t)&&!t.defaultPrevented&&(p(),b.value=window.setTimeout(()=>k(t),700)))}async function i(t){e.value||(await K(),q(t)&&!t.defaultPrevented&&p())}return J(()=>{n.value&&(c.triggerElement.value=n.value)}),(t,d)=>(u(),B(O,null,[$(a(ce),{as:"template",reference:f.value},null,8,["reference"]),$(a(ue),E({ref:a(s),as:t.as,"as-child":t.asChild,"data-state":a(c).open.value?"open":"closed","data-disabled":a(e)?"":void 0,style:{WebkitTouchCallout:"none",pointerEvents:"auto"}},t.$attrs,{onContextmenu:C,onPointerdown:T,onPointermove:i,onPointercancel:i,onPointerup:i}),{default:m(()=>[x(t.$slots,"default")]),_:3},16,["as","as-child","data-state","data-disabled"])],64))}}),Fe=y({__name:"ContextMenuPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(r){const o=r;return(e,s)=>(u(),g(a(fe),S(M(o)),{default:m(()=>[x(e.$slots,"default")]),_:3},16))}}),ze=y({__name:"ContextMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},alignOffset:{default:0},avoidCollisions:{type:Boolean,default:!0},collisionBoundary:{default:()=>[]},collisionPadding:{default:0},sticky:{default:"partial"},hideWhenDetached:{type:Boolean,default:!1},positionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(r,{emit:o}){const n=V(r,o);R();const c=oe(),l=L(!1);return(f,b)=>(u(),g(a(pe),E(a(n),{side:"right","side-offset":2,align:"start","update-position-strategy":"always",style:{"--reka-context-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-context-menu-content-available-width":"var(--reka-popper-available-width)","--reka-context-menu-content-available-height":"var(--reka-popper-available-height)","--reka-context-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-context-menu-trigger-height":"var(--reka-popper-anchor-height)"},onCloseAutoFocus:b[0]||(b[0]=p=>{!p.defaultPrevented&&l.value&&p.preventDefault(),l.value=!1}),onInteractOutside:b[1]||(b[1]=p=>{p.detail.originalEvent.button===2&&p.target===a(c).triggerElement.value&&p.preventDefault(),!p.defaultPrevented&&!a(c).modal.value&&(l.value=!0)})}),{default:m(()=>[x(f.$slots,"default")]),_:3},16))}}),Le=y({__name:"ContextMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(r,{emit:o}){const e=r,n=_e(o);return R(),(c,l)=>(u(),g(a(me),S(M({...e,...a(n)})),{default:m(()=>[x(c.$slots,"default")]),_:3},16))}}),Ae=y({__name:"ContextMenuGroup",props:{asChild:{type:Boolean},as:{}},setup(r){const o=r;return R(),(e,s)=>(u(),g(a(be),S(M(o)),{default:m(()=>[x(e.$slots,"default")]),_:3},16))}}),Ve=y({__name:"ContextMenuSeparator",props:{asChild:{type:Boolean},as:{}},setup(r){const o=r;return R(),(e,s)=>(u(),g(a(he),S(M(o)),{default:m(()=>[x(e.$slots,"default")]),_:3},16))}}),We=y({__name:"ContextMenuLabel",props:{asChild:{type:Boolean},as:{}},setup(r){const o=r;return R(),(e,s)=>(u(),g(a(ge),S(M(o)),{default:m(()=>[x(e.$slots,"default")]),_:3},16))}}),Ne=y({__name:"ContextMenu",props:{dir:{},modal:{type:Boolean}},emits:["update:open"],setup(r,{emit:o}){const n=V(r,o);return(c,l)=>(u(),g(a(De),S(M(a(n))),{default:m(()=>[x(c.$slots,"default")]),_:3},16))}}),Ke=y({__name:"ContextMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(r,{emit:o}){const e=r,s=o,n=w(()=>{const{class:l,...f}=e;return f}),c=V(n,s);return(l,f)=>(u(),g(a(Fe),null,{default:m(()=>[$(a(ze),E(a(c),{class:a(W)("z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e.class)}),{default:m(()=>[x(l.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),Ue=y({__name:"ContextMenuGroup",props:{asChild:{type:Boolean},as:{}},setup(r){const o=r;return(e,s)=>(u(),g(a(Ae),S(M(o)),{default:m(()=>[x(e.$slots,"default")]),_:3},16))}}),je=y({__name:"ContextMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},emits:["select"],setup(r,{emit:o}){const e=r,s=o,n=w(()=>{const{class:l,...f}=e;return f}),c=V(n,s);return(l,f)=>(u(),g(a(Le),E(a(c),{class:a(W)("relative flex cursor-default select-none items-center rounded-sm gap-2 px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l.inset&&"pl-8",e.class)}),{default:m(()=>[x(l.$slots,"default")]),_:3},16,["class"]))}}),Ge=y({__name:"ContextMenuLabel",props:{asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(r){const o=r,e=w(()=>{const{class:s,...n}=o;return n});return(s,n)=>(u(),g(a(We),E(e.value,{class:a(W)("px-2 py-1.5 text-sm font-semibold text-foreground",s.inset&&"pl-8",o.class)}),{default:m(()=>[x(s.$slots,"default")]),_:3},16,["class"]))}}),X=y({__name:"ContextMenuSeparator",props:{asChild:{type:Boolean},as:{},class:{}},setup(r){const o=r,e=w(()=>{const{class:s,...n}=o;return n});return(s,n)=>(u(),g(a(Ve),E(e.value,{class:a(W)("-mx-1 my-1 h-px bg-border",o.class)}),null,16,["class"]))}}),He=y({__name:"ContextMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(r){const e=ve(r);return(s,n)=>(u(),g(a(Ee),S(M(a(e))),{default:m(()=>[x(s.$slots,"default")]),_:3},16))}}),Ye={key:0,class:"size-4 flex-center"},qe=y({name:"FaContextMenu",__name:"index",props:{items:{}},setup(r){const o=r,e=ye(),s=w(()=>o.items.map(l=>l.filter(f=>!f.hide)).filter(l=>l.length)),n=w(()=>s.value.some(l=>l.some(f=>f.icon)));function c(l){var f;(f=l.handle)==null||f.call(l)}return(l,f)=>{const b=te;return u(),g(a(Ne),{modal:!1},{default:m(()=>[$(a(He),{"as-child":""},{default:m(()=>[x(l.$slots,"default")]),_:3}),$(a(Ke),{class:"z-2050"},{default:m(()=>[e.label?(u(),B(O,{key:0},[$(a(Ge),null,{default:m(()=>[x(l.$slots,"label")]),_:3}),$(a(X))],64)):D("",!0),(u(!0),B(O,null,j(a(s),(p,k)=>(u(),B(O,{key:k},[$(a(Ue),null,{default:m(()=>[(u(!0),B(O,null,j(p,(C,T)=>(u(),g(a(je),{key:T,disabled:C.disabled,class:"cursor-pointer",onClick:i=>c(C)},{default:m(()=>[a(n)?(u(),B("div",Ye,[C.icon?(u(),g(b,{key:0,name:C.icon,class:"size-4"},null,8,["name"])):D("",!0)])):D("",!0),ee(" "+z(C.label),1)]),_:2},1032,["disabled","onClick"]))),128))]),_:2},1024),k!==a(s).length-1?(u(),g(a(X),{key:0})):D("",!0)],64))),128))]),_:3})]),_:3})}}});function Xe(){const r=se(),o=ne(),e=ae();function s(){return r.fullPath}function n(i){const t=s();o.push(i).then(()=>{e.remove(t)})}function c(i=s()){if(p(i,!1)){const t=s();if(i===t){const d=e.list.findIndex(h=>h.tabId===i);d<e.list.length-1?n(e.list[d+1].fullPath):n(e.list[d-1].fullPath)}else e.remove(i)}}function l(i=s()){const t=s();if(i!==t){const d=e.list.findIndex(h=>h.tabId===i);o.push(e.list[d].fullPath)}e.removeOtherSide(i)}function f(i=s()){const t=s();if(i!==t){const d=e.list.findIndex(_=>_.tabId===i);e.list.findIndex(_=>_.tabId===t)<d&&o.push(e.list[d].fullPath)}e.removeLeftSide(i)}function b(i=s()){const t=s();if(i!==t){const d=e.list.findIndex(_=>_.tabId===i);e.list.findIndex(_=>_.tabId===t)>d&&o.push(e.list[d].fullPath)}e.removeRightSide(i)}function p(i=s(),t=!0){let d=!0;return e.list.findIndex(_=>_.tabId===i)<0?(d=!1,!t&&A.warning("关闭的标签页不存在",{position:"top-center"})):e.list.length<=1&&(d=!1,!t&&A.warning("当前只有一个标签页，不可关闭",{position:"top-center"})),d}function k(i=s()){return e.list.some(t=>t.tabId!==i)}function C(i=s()){var d;let t=!0;if(i===((d=e.list[0])==null?void 0:d.tabId))t=!1;else{const h=e.list.findIndex(_=>_.tabId===i);t=e.list.some((_,I)=>I<h&&_.tabId!==i)}return t}function T(i=s()){var d;let t=!0;if(i===((d=e.list.at(-1))==null?void 0:d.tabId))t=!1;else{const h=e.list.findIndex(_=>_.tabId===i);t=e.list.some((_,I)=>I>=h&&_.tabId!==i)}return t}return{getId:s,close:n,closeById:c,closeOtherSide:l,closeLeftSide:f,closeRightSide:b,checkClose:p,checkCloseOtherSide:k,checkCloseLeftSide:C,checkCloseRightSide:T}}const Qe={class:"tabbar"},Ze={class:"tabbar-container"},Je=["data-index","onClick"],et={class:"size-full"},tt={class:"tab-content"},at=["onClick"],st={class:"text-sm"},nt={class:"text-accent-foreground/50"},ot=y({name:"Tabbar",__name:"index",setup(r){const o=se(),e=ne(),s=xe(),n=ae(),c=Xe(),l=Re(),f=Ce({reactive:!0}),b=w(()=>c.getId()),p=U("tabsRef"),k=U("tabContainerRef"),C=U("tabRef");Z(()=>o,t=>{s.settings.tabbar.enable&&n.add(t).then(()=>{var h,_;const d=n.list.findIndex(I=>I.tabId===b.value);d!==-1&&(C.value&&((_=p.value)==null||_.scrollTo(C.value[d].offsetLeft-((h=p.value.ref)==null?void 0:h.$el.clientWidth)*.4)),T())})},{immediate:!0,deep:!0});function T(){var t,d,h;if(((t=k.value)==null?void 0:t.$el.clientWidth)>(((h=(d=p.value)==null?void 0:d.ref)==null?void 0:h.$el.clientWidth)??0)&&localStorage.getItem("tabbarScrollTip")===void 0){localStorage.setItem("tabbarScrollTip","");const _=A.info("温馨提示",{description:"标签栏数量超过展示区域范围，可以将鼠标移到标签栏上，通过鼠标滚轮滑动浏览",position:"top-center",duration:1/0,action:{label:"知道了",onClick:()=>A.dismiss(_)}})}}function i(t){return[[{label:"重新加载",icon:"i-ri:refresh-line",disabled:t.tabId!==b.value,handle:()=>l.reload()},{label:"关闭标签页",icon:"i-ri:close-line",disabled:n.list.length<=1,handle:()=>c.closeById(t.tabId)}],[{label:"关闭其他标签页",disabled:!c.checkCloseOtherSide(t.tabId),handle:()=>c.closeOtherSide(t.tabId)},{label:"关闭左侧标签页",disabled:!c.checkCloseLeftSide(t.tabId),handle:()=>c.closeLeftSide(t.tabId)},{label:"关闭右侧标签页",disabled:!c.checkCloseRightSide(t.tabId),handle:()=>c.closeRightSide(t.tabId)}]]}return J(()=>{G("alt+left,alt+right,alt+w,alt+1,alt+2,alt+3,alt+4,alt+5,alt+6,alt+7,alt+8,alt+9,alt+0",(t,d)=>{var h,_;if(s.settings.tabbar.enable&&s.settings.tabbar.enableHotkeys)switch(t.preventDefault(),d.key){case"alt+left":if(n.list[0].tabId!==b.value){const I=n.list.findIndex(F=>F.tabId===b.value);e.push(n.list[I-1].fullPath)}break;case"alt+right":if(((h=n.list.at(-1))==null?void 0:h.tabId)!==b.value){const I=n.list.findIndex(F=>F.tabId===b.value);e.push(n.list[I+1].fullPath)}break;case"alt+w":c.closeById(b.value);break;case"alt+1":case"alt+2":case"alt+3":case"alt+4":case"alt+5":case"alt+6":case"alt+7":case"alt+8":case"alt+9":{const I=Number(d.key.split("+")[1]);(_=n.list[I-1])!=null&&_.fullPath&&e.push(n.list[I-1].fullPath);break}case"alt+0":e.push(n.list[n.list.length-1].fullPath);break}})}),ke(()=>{G.unbind("alt+left,alt+right,alt+w,alt+1,alt+2,alt+3,alt+4,alt+5,alt+6,alt+7,alt+8,alt+9,alt+0")}),(t,d)=>{const h=te,_=Te,I=qe,F=Ie;return u(),B("div",Qe,[(u(),g(H(a(Y)("tabbar-start")))),P("div",Ze,[$(F,{ref_key:"tabsRef",ref:p,horizontal:"",scrollbar:!1,mask:"","gradient-color":"var(--g-tabbar-bg)",class:"tabs"},{default:m(()=>[$($e,{ref_key:"tabContainerRef",ref:k,name:"tabbar",tag:"div",class:"tab-container"},{default:m(()=>[(u(!0),B(O,null,j(a(n).list,(v,N)=>(u(),B("div",{key:v.tabId,ref_for:!0,ref_key:"tabRef",ref:C,"data-index":N,class:Be(["tab",{actived:v.tabId===a(b)}]),onClick:le=>a(e).push(v.fullPath)},[$(I,{items:i(v)},{default:m(()=>[P("div",et,[d[0]||(d[0]=P("div",{class:"tab-dividers"},null,-1)),d[1]||(d[1]=P("div",{class:"tab-background"},null,-1)),$(_,{delay:1e3,side:"bottom"},{content:m(()=>[P("div",st,z(typeof(v==null?void 0:v.title)=="function"?v.title():v.title),1),P("div",nt,z(v.fullPath),1)]),default:m(()=>[P("div",tt,[(u(),B("div",{key:v.tabId,class:"title"},[a(s).settings.tabbar.enableIcon&&v.icon?(u(),g(h,{key:0,name:v.icon,class:"icon"},null,8,["name"])):D("",!0),ee(" "+z(typeof(v==null?void 0:v.title)=="function"?v.title():v.title),1)])),a(n).list.length>1?(u(),B("div",{key:0,class:"action-icon",onClick:we(le=>a(c).closeById(v.tabId),["stop"])},[$(h,{name:"i-ri:close-fill"})],8,at)):D("",!0),Pe(P("div",{class:"hotkey-number"},z(N+1),513),[[Se,a(f).alt&&N<9]])])]),_:2},1024)])]),_:2},1032,["items"])],10,Je))),128))]),_:1},512)]),_:1},512)]),(u(),g(H(a(Y)("tabbar-end"))))])}}}),ft=Me(ot,[["__scopeId","data-v-7110326d"]]);export{ft as default};
