
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as gt,N as xt,r as u,u as Vt,o as yt,z as Dt,c as g,b as e,F as Q,L as J,e as i,w as a,f as x,g as m,C as lt,t as X,B as bt,h as n,D as st,p as c,Q as U,A as M,s as A,M as p,R as kt}from"./index-CT_znvxk.js";import{_ as wt}from"./Vector-BpqaxEIj.js";const Ct={style:{padding:"0 16px"}},ht={class:"tags"},Ut={class:"PageMain"},Ft={class:"grid-content min-height436"},Bt={class:"grid-content-item marginBottom40"},It={class:"grid-content-item-title flex"},St={class:"buttonBox flex"},Et=["src"],Tt={class:"grid-content-item"},Mt={class:"grid-content-item-title flex"},$t={class:"buttonBox flex"},Ot={class:"grid-content min-height436"},qt={class:"grid-content-item marginBottom16 border"},Nt={class:"grid-content-item-title flex"},zt={class:"buttonBox flex"},Lt={class:"slider-block"},Rt={class:"grid-content-item marginBottom16 border"},Pt={class:"grid-content-item-title flex"},At={class:"buttonBox flex"},jt={class:"slider-block"},Gt={class:"grid-content-item border"},Kt={class:"radio-block"},Wt={class:"grid-content min-height436"},Yt={class:"PageMain"},Ht={class:"grid-content min-height234"},Qt={class:"grid-content-item"},Jt={class:"grid-content-item-title flex"},Xt={class:"radio-block"},Zt={key:0},te={class:"buttonBox flex"},ee={key:1},le={class:"buttonBox flex"},se={key:0},oe={key:1},ie=["src"],ae={class:"grid-content min-height234"},ne={class:"grid-content-item marginBottom16"},de={class:"input-block"},re={class:"buttonBox flex"},ue={class:"grid-content min-height234"},ce={class:"grid-content-item marginBottom16"},pe={class:"input-block"},me={class:"buttonBox flex"},ve={class:"grid-content min-height234"},fe={class:"grid-content-item marginBottom16"},_e={class:"input-block"},ge={class:"buttonBox flex"},xe={class:"grid-content min-height234"},Ve={class:"grid-content-item marginBottom16"},ye={class:"input-block"},De={class:"buttonBox flex"},be={class:"grid-content min-height234"},ke={class:"grid-content-item marginBottom16"},we={class:"input-block"},Ce={class:"buttonBox flex"},he={class:"grid-content min-height234"},Ue={class:"grid-content-item marginBottom16"},Fe={class:"input-block"},Be={class:"buttonBox flex"},Te=gt({__name:"index",setup(Ie){const r=xt([{title:"密钥名称",value:"自用11"},{title:"到期时间",value:"108天 6小时 44分钟 38秒",class:"color3"},{title:"音频文件3-10秒",value:"未上传",class:"color1"},{title:"主线音频",value:"未开启",class:"color1"},{title:"抖音直播间",value:"未连接/直播已结束",class:"color1"},{title:"视频号直播间",value:"未连接/直播已结束",class:"color1"},{title:"点赞感谢",value:"未开启",class:"color1"},{title:"欢迎语",value:"未开启",class:"color1"},{title:"礼物感谢",value:"未开启",class:"color1"},{title:"智能回复",value:"未开启",class:"color1"}]);let F=u("");const l=Vt();let k=u(""),B=u(16),I=u(8),V=u(1),w=u("");const j=u(!1),C=u(!0),Z=u(""),$=u(""),G=u([]),h=u([]),E=u(""),O=u(.1),q=u(.1),N=u(.1),z=u(.1),L=u(.1),R=u(.1),P=u(.1),ot=o=>{const t=new Date(o),d=setInterval(()=>{const f=t-new Date;if(f<=0)clearInterval(d),Z.value="已过期",admin.value=!1;else{const _=Math.floor(f/864e5),v=Math.floor(f%(1e3*60*60*24)/(1e3*60*60)),S=Math.floor(f%(1e3*60*60)/(1e3*60)),b=Math.floor(f%(1e3*60)/1e3);Z.value=`${_}天 ${v}小时 ${S}分钟 ${b}秒`}},1e3);return d},it=async()=>{await l.set_all_model("F5")},tt=async()=>{try{const o=await l.get_list_tts();console.log(o),G.value=o}catch(o){console.error("上传文件失败:",o)}};function at(o){const d=Date.parse(o)+8*36e5,y=new Date(d),f=T=>T.toString().padStart(2,"0"),_=y.getUTCFullYear(),v=f(y.getUTCMonth()+1),S=f(y.getUTCDate()),b=f(y.getUTCHours()),W=f(y.getUTCMinutes()),Y=f(y.getUTCSeconds());return`${_}-${v}-${S} ${b}:${W}:${Y}`}const K=()=>{l.getConfig().then(o=>{console.log(r[0].value),r[0].value=l.name,r[1].value=at(l.time),r[2].value=l.initData.config_data.ref_audio_path?"已上传":"未上传",r[2].class=l.initData.config_data.ref_audio_path?"color2":"color1",r[3].value=l.initData.stop_speech_loop?"已开启":"未开启",r[3].class=l.initData.stop_speech_loop?"color2":"color1",r[4].value=l.initData.liveId?"已连接":"未连接",r[4].class=l.initData.liveId?"color2":"color1",r[5].value=l.initData.qrStatus?"未连接":"已连接",r[5].class=l.initData.qrStatus?"color1":"color2",r[6].value=l.initData.UserLikesOff?"已开启":"未开启",r[6].class=l.initData.UserLikesOff?"color2":"color1",r[7].value=l.initData.UserWelcomesOff?"已开启":"未开启",r[7].class=l.initData.UserWelcomesOff?"color2":"color1",r[8].value=l.initData.UserGiftsOff?"已开启":"未开启",r[8].class=l.initData.UserGiftsOff?"color2":"color1",r[9].value=l.initData.UserAiOff?"已开启":"未开启",r[9].class=l.initData.UserAiOff?"color2":"color1",console.log(r),F.value=l.initData.ref_audio_path||"",k.value=l.initData.prompt_text||"",B.value=l.initData.speed_factor,I.value=l.initData.nfe_step,C.value=l.initData.interrupt_zindex1,h.value=l.initData.no_name,O.value=l.initData.all_space,q.value=l.initData.all_space_last,N.value=l.initData.likes_space,z.value=l.initData.welcomes_space,L.value=l.initData.loves_space,R.value=l.initData.gifts_space,P.value=l.initData.keys_ai})};yt(()=>{K(),it(),tt(),w.value=localStorage.getItem("liveID"),l.startCountTime&&ot(l.startCountTime)});const nt=o=>{const t=G.value.find(d=>d.absolute_path===o);dt(t)},dt=o=>{const t=o.filename.substring(0,o.filename.lastIndexOf("."));k.value=t,$.value=`http://localhost:3201/api/audio/${o.filename}`,console.log($.value)},rt=async o=>{console.log(o);const t=h.value.indexOf(o);t>-1&&h.value.splice(t,1),await l.setNoRead(h.value).then(d=>{p.success("提示",{description:"删除成功"})}).catch(d=>{p.error("提示",{description:"操作失败"})})},ut=()=>{j.value=!0},et=async()=>{E.value&&h.value.push(E.value),j.value=!1,E.value="",await l.setNoRead(h.value).then(o=>{p.success("提示",{description:"添加成功"})}).catch(o=>{p.error("提示",{description:"操作失败"})})},ct=async o=>{const t=o.match(/\/(\d+)$/);return t?t[1]:null},pt=async o=>{const t=await ct(w.value);if(!t){p.error("提示",{description:"无法提取直播间ID，请检查链接格式"});return}l.initData.liveId=t,localStorage.setItem("liveID",w.value),await l.start_fetching(t).then(d=>{p.success("提示",{description:"连接成功"}),K()}).catch(d=>{p.error("提示",{description:"连接失败"})})},mt=async o=>{l.initData.liveId="",await l.stop_fetching().then(t=>{p.success("提示",{description:"断开成功"}),K()}).catch(t=>{p.error("提示",{description:"断开失败"})})},vt=async()=>{await l.setConfig(F.value,k.value).then(o=>{console.log(o),p.success("提示",{description:"设置成功"})}).catch(o=>{console.log(o),p.error("提示",{description:"设置失败"})})},D=async()=>{var o={speed_factor:B.value,welcomes_space:z.value*1,loves_space:L.value*1,likes_space:N.value*1,gifts_space:R.value*1,keys_ai:P.value*1,all_space:O.value*1,nfe_step:I.value,all_space_last:q.value*1};await l.setProIndex(o).then(t=>{console.log(t),p.success("提示",{description:"设置成功"})}).catch(t=>{console.log(t),p.error("提示",{description:"设置失败"})})};Dt(C,async(o,t)=>{ft()});const ft=async()=>{await l.set_interrupt(C.value).then(o=>{console.log(o),p.success("提示",{description:"设置成功"})}).catch(o=>{console.log(o),p.error("提示",{description:"设置失败"})})},_t=async()=>{l.initData.qrStatus=10,await l.wx_login().then(o=>{console.log(o),p.success("提示",{description:"获取成功，请及时扫码"})}).catch(o=>{console.log(o),p.error("提示",{description:"获取失败"})})};return(o,t)=>{const d=x("el-button"),y=x("el-option"),f=x("el-select"),_=x("el-input"),v=x("el-col"),S=x("el-slider"),b=x("el-radio"),W=x("ElTag"),Y=x("ElInput"),T=x("el-row");return m(),g("div",Ct,[e("div",ht,[(m(!0),g(Q,null,J(r,(s,H)=>lt((m(),g("div",{key:H,class:"tags-item"},[e("span",null,X(s.title)+": ",1),e("span",{class:bt(s.class)},X(s.value),3)])),[[st,H>1]])),128))]),e("div",Ut,[i(T,{gutter:16},{default:a(()=>[i(v,{xs:24,sm:24,md:24,lg:8,xl:8},{default:a(()=>[e("div",Ft,[e("div",Bt,[e("div",It,[t[21]||(t[21]=e("div",{class:"descriptions"},"选择音频文件3-10秒之间",-1)),e("div",St,[i(d,{color:"#3E61FF",onClick:t[0]||(t[0]=s=>tt()),plain:""},{default:a(()=>t[19]||(t[19]=[n("刷新音频")])),_:1}),i(d,{color:"#3E61FF",onClick:t[1]||(t[1]=s=>{o.$refs.audio.load(),o.$refs.audio.play()})},{default:a(()=>t[20]||(t[20]=[e("img",{class:"btn-icon",src:wt,alt:""},null,-1),n(" 试听 ")])),_:1})])]),lt(e("audio",{ref:"audio",style:{height:"20px"},controls:"",src:$.value},null,8,Et),[[st,$.value]]),i(f,{modelValue:c(F),"onUpdate:modelValue":t[2]||(t[2]=s=>U(F)?F.value=s:F=s),filterable:"",placeholder:"请选择音频文件",onChange:nt,class:"custom-select"},{default:a(()=>[(m(!0),g(Q,null,J(G.value,s=>(m(),M(y,{key:s.absolute_path,label:s.filename,value:s.absolute_path},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),e("div",Tt,[e("div",Mt,[t[23]||(t[23]=e("div",{class:"descriptions"}," 音频参考文字 ",-1)),e("div",$t,[i(d,{color:"#3E61FF",onClick:vt},{default:a(()=>t[22]||(t[22]=[n(" 设置 ")])),_:1})])]),i(_,{modelValue:c(k),"onUpdate:modelValue":t[3]||(t[3]=s=>U(k)?k.value=s:k=s),autosize:"",type:"textarea","show-word-limit":"",style:{height:"211px"},maxlength:"80",placeholder:"请输入音频参考文字"},null,8,["modelValue"])])])]),_:1}),i(v,{xs:24,sm:24,md:24,lg:8,xl:8},{default:a(()=>[e("div",Ot,[e("div",qt,[e("div",Nt,[t[25]||(t[25]=e("div",{class:"descriptions"}," 生成语速 ",-1)),e("div",zt,[i(d,{color:"#3E61FF",onClick:D},{default:a(()=>t[24]||(t[24]=[n(" 设置 ")])),_:1})])]),e("div",Lt,[i(S,{modelValue:c(B),"onUpdate:modelValue":t[4]||(t[4]=s=>U(B)?B.value=s:B=s),min:.1,max:1.65,step:.01},null,8,["modelValue"])])]),e("div",Rt,[e("div",Pt,[t[27]||(t[27]=e("div",{class:"descriptions"}," 降噪步数 ",-1)),e("div",At,[i(d,{color:"#3E61FF",onClick:D},{default:a(()=>t[26]||(t[26]=[n(" 设置 ")])),_:1})])]),e("div",jt,[i(S,{modelValue:c(I),"onUpdate:modelValue":t[5]||(t[5]=s=>U(I)?I.value=s:I=s),min:10,max:40,step:2},null,8,["modelValue"])])]),e("div",Gt,[t[30]||(t[30]=e("div",{class:"grid-content-item-title flex"},[e("div",{class:"descriptions"}," 回复弹幕或欢迎语触发方式 ")],-1)),e("div",Kt,[e("div",null,[i(b,{modelValue:C.value,"onUpdate:modelValue":t[6]||(t[6]=s=>C.value=s),value:!0},{default:a(()=>t[28]||(t[28]=[n(" 立即打断当前音频 ")])),_:1},8,["modelValue"])]),e("div",null,[i(b,{modelValue:C.value,"onUpdate:modelValue":t[7]||(t[7]=s=>C.value=s),value:!1},{default:a(()=>t[29]||(t[29]=[n(" 等待当前音频说完 ")])),_:1},8,["modelValue"])])])])])]),_:1}),i(v,{xs:24,sm:24,md:24,lg:8,xl:8},{default:a(()=>[e("div",Wt,[t[32]||(t[32]=e("div",{class:"descriptions"}," 添加场控，添加抖音昵称 ",-1)),t[33]||(t[33]=e("div",{class:"tips-color-red"}," 弹幕不会和以下这些人互动 ",-1)),(m(!0),g(Q,null,J(h.value,s=>(m(),M(W,{style:{margin:"0 5px"},key:s,onClose:H=>rt(s),closable:"",type:"danger"},{default:a(()=>[n(X(s),1)]),_:2},1032,["onClose"]))),128)),j.value?(m(),M(Y,{key:0,ref:"InputRef",modelValue:E.value,"onUpdate:modelValue":t[8]||(t[8]=s=>E.value=s),class:"w-20",placeholder:"请输入抖音昵称",size:"small",onKeyupEnter:et,onBlur:et},null,8,["modelValue"])):(m(),M(d,{key:1,color:"#3E61FF",type:"primary",onClick:ut,icon:c(kt),plain:""},{default:a(()=>t[31]||(t[31]=[n(" 添加抖音昵称 ")])),_:1},8,["icon"]))])]),_:1})]),_:1})]),e("div",Yt,[i(T,{gutter:16},{default:a(()=>[i(v,{xs:24,sm:24,md:12,lg:12,xl:6},{default:a(()=>[e("div",Ht,[e("div",Qt,[e("div",Jt,[t[36]||(t[36]=e("div",{class:"descriptions"}," 链接直播间 ",-1)),e("div",Xt,[i(b,{modelValue:c(V),"onUpdate:modelValue":t[9]||(t[9]=s=>U(V)?V.value=s:V=s),value:1},{default:a(()=>t[34]||(t[34]=[n(" 抖音 ")])),_:1},8,["modelValue"]),i(b,{modelValue:c(V),"onUpdate:modelValue":t[10]||(t[10]=s=>U(V)?V.value=s:V=s),value:2},{default:a(()=>t[35]||(t[35]=[n(" 视频号 ")])),_:1},8,["modelValue"])])]),t[40]||(t[40]=e("div",{class:"tips-color-blue"}," 点赞，欢迎礼物感谢，DeepSeek，需链接到直播间确保开播后再去链接 ",-1)),c(V)==1?(m(),g("div",Zt,[i(_,{modelValue:c(w),"onUpdate:modelValue":t[11]||(t[11]=s=>U(w)?w.value=s:w=s),style:{height:"50px","margin-bottom":"10px"},placeholder:"请输入抖音直播间链接，格式：https://live.douyin.com/288735743xxx",clearable:""},null,8,["modelValue"]),e("div",te,[i(d,{color:"#3E61FF",onClick:pt,disabled:c(l).initData.liveId!=""},{default:a(()=>t[37]||(t[37]=[n(" 连接 ")])),_:1},8,["disabled"]),i(d,{color:"#3E61FF",onClick:mt,disabled:c(l).initData.liveId=="",plain:""},{default:a(()=>t[38]||(t[38]=[n(" 断开 ")])),_:1},8,["disabled"])])])):(m(),g("div",ee,[e("div",le,[c(l).initData.qrStatus?A("",!0):(m(),g("p",se,"已连接")),c(l).initData.qrStatus===10?(m(),g("p",oe,"请稍后，获取中...")):A("",!0),c(l).initData.qrStatus===2||c(l).initData.qrStatus===3?(m(),g("img",{key:2,src:`data:image/png;base64,${c(l).initData.qrcode}`,alt:"二维码"},null,8,ie)):A("",!0),c(l).initData.qrStatus===1?(m(),M(d,{key:3,type:"primary",size:"small",onClick:_t},{default:a(()=>t[39]||(t[39]=[n(" 获取二维码 ")])),_:1})):A("",!0)])]))])])]),_:1}),i(v,{xs:24,sm:24,md:12,lg:12,xl:6},{default:a(()=>[e("div",ae,[e("div",ne,[t[45]||(t[45]=e("div",{class:"grid-content-item-title flex"},[e("div",{class:"descriptions"},[n(" 每句话的间隔"),e("span",null,"（取中间值随机）")])],-1)),e("div",de,[i(_,{modelValue:O.value,"onUpdate:modelValue":t[12]||(t[12]=s=>O.value=s),style:{"max-width":"600px"},type:"number",placeholder:"请输入"},{append:a(()=>t[41]||(t[41]=[n(" 秒 ")])),_:1},8,["modelValue"]),t[43]||(t[43]=e("span",{class:"separate"},"~",-1)),i(_,{modelValue:q.value,"onUpdate:modelValue":t[13]||(t[13]=s=>q.value=s),style:{"max-width":"600px"},type:"number",placeholder:"请输入"},{append:a(()=>t[42]||(t[42]=[n(" 秒 ")])),_:1},8,["modelValue"])]),e("div",re,[i(d,{color:"#3E61FF",onClick:D},{default:a(()=>t[44]||(t[44]=[n(" 应用 ")])),_:1})])])])]),_:1}),i(v,{xs:24,sm:24,md:12,lg:12,xl:6},{default:a(()=>[e("div",ue,[e("div",ce,[t[48]||(t[48]=e("div",{class:"grid-content-item-title flex"},[e("div",{class:"descriptions"}," 点赞感谢多久触发一次 ")],-1)),e("div",pe,[i(_,{modelValue:N.value,"onUpdate:modelValue":t[14]||(t[14]=s=>N.value=s),style:{"max-width":"600px"},type:"number",placeholder:"请输入"},{append:a(()=>t[46]||(t[46]=[n(" 秒 ")])),_:1},8,["modelValue"])]),e("div",me,[i(d,{color:"#3E61FF",onClick:D},{default:a(()=>t[47]||(t[47]=[n(" 应用 ")])),_:1})])])])]),_:1}),i(v,{xs:24,sm:24,md:12,lg:12,xl:6},{default:a(()=>[e("div",ve,[e("div",fe,[t[51]||(t[51]=e("div",{class:"grid-content-item-title flex"},[e("div",{class:"descriptions"}," 欢迎多久触发一次 ")],-1)),e("div",_e,[i(_,{modelValue:z.value,"onUpdate:modelValue":t[15]||(t[15]=s=>z.value=s),style:{"max-width":"600px"},type:"number",placeholder:"请输入"},{append:a(()=>t[49]||(t[49]=[n(" 秒 ")])),_:1},8,["modelValue"])]),e("div",ge,[i(d,{color:"#3E61FF",onClick:D},{default:a(()=>t[50]||(t[50]=[n(" 应用 ")])),_:1})])])])]),_:1})]),_:1}),i(T,{gutter:16},{default:a(()=>[i(v,{xs:24,sm:24,md:12,lg:12,xl:6},{default:a(()=>[e("div",xe,[e("div",Ve,[t[54]||(t[54]=e("div",{class:"grid-content-item-title flex"},[e("div",{class:"descriptions"}," 关注感谢多久触发一次 ")],-1)),e("div",ye,[i(_,{modelValue:L.value,"onUpdate:modelValue":t[16]||(t[16]=s=>L.value=s),style:{"max-width":"600px"},type:"number",placeholder:"请输入"},{append:a(()=>t[52]||(t[52]=[n(" 秒 ")])),_:1},8,["modelValue"])]),e("div",De,[i(d,{color:"#3E61FF",onClick:D},{default:a(()=>t[53]||(t[53]=[n(" 应用 ")])),_:1})])])])]),_:1}),i(v,{xs:24,sm:24,md:12,lg:12,xl:6},{default:a(()=>[e("div",be,[e("div",ke,[t[57]||(t[57]=e("div",{class:"grid-content-item-title flex"},[e("div",{class:"descriptions"}," 礼物感谢多久触发一次 ")],-1)),e("div",we,[i(_,{modelValue:R.value,"onUpdate:modelValue":t[17]||(t[17]=s=>R.value=s),style:{"max-width":"600px"},type:"number",placeholder:"请输入"},{append:a(()=>t[55]||(t[55]=[n(" 秒 ")])),_:1},8,["modelValue"])]),e("div",Ce,[i(d,{color:"#3E61FF",onClick:D},{default:a(()=>t[56]||(t[56]=[n(" 应用 ")])),_:1})])])])]),_:1}),i(v,{xs:24,sm:24,md:12,lg:12,xl:6},{default:a(()=>[e("div",he,[e("div",Ue,[t[60]||(t[60]=e("div",{class:"grid-content-item-title flex"},[e("div",{class:"descriptions"}," Deep Seek多久触发一次 ")],-1)),e("div",Fe,[i(_,{modelValue:P.value,"onUpdate:modelValue":t[18]||(t[18]=s=>P.value=s),style:{"max-width":"600px"},type:"number",placeholder:"请输入"},{append:a(()=>t[58]||(t[58]=[n(" 秒 ")])),_:1},8,["modelValue"])]),e("div",Be,[i(d,{color:"#3E61FF",onClick:D},{default:a(()=>t[59]||(t[59]=[n(" 应用 ")])),_:1})])])])]),_:1})]),_:1})])])}}});export{Te as default};
